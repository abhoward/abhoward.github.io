<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
        <script type="text/javascript" src="https://code.highcharts.com/highcharts.js"></script>
        <script type="text/javascript" src="https://code.highcharts.com/highcharts-more.js"></script>
        <script type="text/javascript" src="https://code.highcharts.com/modules/drilldown.js"></script>
        <script src="https://code.highcharts.com/modules/pictorial.js"></script>
        <script src="https://code.highcharts.com/modules/mouse-wheel-zoom.js"></script>
    </head>
    <body style="margin:0;padding:0">
        <div id="container" style="width:100%;height:100%">Loading....</div>
        <script>
            var monCountsLink = 'https://raw.githubusercontent.com/abhoward/abhoward.github.io/main/data/Pokemon/safari_week_2023_mon_counts.json';
            var monEncountersLink = 'https://raw.githubusercontent.com/abhoward/abhoward.github.io/main/data/Pokemon/safari_week_2023_mon_encounters.json';

            var manectricSVGLink = 'https://raw.githubusercontent.com/abhoward/abhoward.github.io/main/assets/pokemon/svg_paths/manectric.txt'

            function createHighchart(data1, data2, data3) {
                var monCounts = data1[0];
                var monEncounters = data2[0];
                var manectricSVG = data3[0];

                Highcharts.chart('container', {
                    'chart': {
                        'type': 'pictorial'
                    },
                    'title': {
                        'text': '<b>Safari Week 2023</b></br>Top 10 Hunts'
                    },
                    'plotOptions': {
                        'pictorial': {
                            'stacking': 'normal'
                        },
                        'series': {
                            'stacking': 'normal',
                            'pointPadding': 0,
                            'groupPadding': 0,
                            'dataLabels': {
                                'enabled': true,
                                'inside': true,
                                'align': 'center'
                            },
                            'cursor': 'pointer',
                            'events': {
                                'click': function(e) {
                                    console.log(e.point)
                                    window.open(e.point.id, '_blank');
                                }
                            },
                            'paths': [{
                                'definition': `M4005 5543 c-108 -25 -200 -65 -315 -139 -36 -23 -62 -32 -75 -28 -121 36 -245 48 -267 26 -18 -18 51 -151 102 -197 11 -10 20 -26 20 -35 0 -22 -26 -44 -40 -35 -17 11 -82 -40 -138 -106 -63 -74 -104 -159 -100 -205 4 -56 -9 -59 -118 -24 -55 17 -115 41 -134 52 -85 50 -471 208 -570 233 -30 8 -80 22 -110 31 -294 86 -644 136 -965 136 -182 0 -309 -16 -484 -63 -149 -39 -206 -67 -275 -135 -80 -79 -76 -94 44 -155 128 -64 158 -87 176 -135 23 -60 63 -84 142 -84 56 0 69 -5 146 -50 131 -78 141 -88 155 -169 15 -84 28 -102 115 -161 36 -25 66 -51 66 -57 0 -19 -226 -18 -282 1 -159 54 -285 58 -378 13 -68 -32 -211 -168 -265 -252 -46 -70 -105 -200 -105 -232 0 -13 -24 -49 -56 -85 -31 -35 -65 -81 -76 -102 -19 -37 -19 -40 -3 -52 23 -17 105 -34 160 -34 53 0 53 5 24 -133 -17 -81 -20 -122 -15 -197 7 -112 13 -140 33 -140 39 0 157 84 270 194 40 38 75 67 77 65 2 -2 13 -23 25 -46 29 -59 165 -159 322 -239 68 -34 106 -29 184 24 l60 41 80 -10 c74 -10 267 -5 299 7 8 3 25 -6 39 -20 14 -14 40 -31 59 -39 31 -13 38 -24 67 -103 44 -120 142 -299 201 -371 50 -59 108 -154 112 -182 3 -14 -27 -16 -267 -18 -350 -2 -486 -7 -511 -21 -33 -18 -91 -87 -120 -143 -14 -29 -41 -75 -60 -102 -44 -64 -44 -99 1 -247 57 -186 73 -230 126 -335 27 -56 49 -104 49 -108 0 -24 121 -246 153 -283 46 -53 79 -71 148 -84 28 -6 77 -26 109 -45 79 -48 132 -65 201 -65 78 0 145 31 235 109 95 81 120 134 93 195 -10 20 -8 28 10 47 45 49 40 161 -10 204 -17 14 -40 27 -52 31 -20 5 -77 89 -77 114 0 6 16 4 38 -6 20 -8 88 -22 151 -30 63 -7 116 -16 119 -18 2 -3 -5 -17 -17 -32 -30 -38 -26 -58 14 -79 38 -21 130 -131 150 -179 21 -51 27 -122 15 -166 -10 -37 -14 -41 -34 -36 -32 8 -42 -7 -55 -79 -13 -69 -32 -95 -59 -79 -22 14 -95 4 -138 -19 -50 -26 -114 -124 -109 -167 1 -8 3 -25 3 -38 1 -13 26 -49 57 -81 30 -32 55 -63 55 -69 0 -5 20 -28 44 -49 42 -37 44 -40 39 -85 -7 -61 13 -73 111 -65 65 6 82 3 189 -33 65 -21 150 -46 190 -55 92 -20 278 -33 337 -23 168 28 169 28 283 100 l47 30 48 -20 c111 -47 177 -57 382 -57 205 0 259 6 285 31 18 18 19 63 3 101 -24 56 -111 173 -156 210 -52 43 -171 130 -187 138 -5 2 -1 10 10 17 32 20 219 214 235 243 14 26 13 28 -21 59 -20 17 -61 50 -92 74 -52 40 -57 46 -57 83 0 36 7 45 106 141 58 57 109 104 114 106 4 2 11 -17 14 -42 10 -64 42 -105 100 -127 65 -24 79 -39 119 -123 44 -93 132 -186 175 -186 65 0 228 63 298 115 17 13 44 23 60 23 72 -2 225 113 244 182 6 24 8 82 4 148 -5 85 -2 141 14 253 80 555 64 730 -78 863 -28 26 -61 71 -76 102 -14 30 -36 62 -49 70 -26 17 -223 32 -268 20 -17 -4 -40 -26 -62 -58 -50 -75 -123 -116 -330 -188 -111 -39 -195 -58 -195 -45 0 4 11 39 26 78 29 81 28 90 -21 193 l-34 71 6 126 6 127 64 82 c72 95 81 119 84 243 4 177 3 185 -41 243 -45 59 -58 102 -42 135 6 12 23 50 37 85 14 34 39 91 55 126 29 65 70 180 70 200 0 6 18 21 40 34 22 12 46 36 55 52 14 27 45 290 45 383 0 69 -28 142 -81 208 -27 34 -52 74 -55 88 -3 14 -17 58 -30 98 l-26 72 56 55 c65 65 78 99 49 127 -22 23 -142 59 -195 59 -40 0 -78 30 -78 61 0 23 -63 77 -124 105 -49 23 -117 30 -171 17z`
                            }, {
                                'definition': `M614 4481 c3 -22 20 -69 37 -104 30 -61 31 -63 15 -101 -18 -44 -24 -44 -128 -1 -39 15 -58 19 -58 11 0 -36 139 -198 208 -244 13 -8 31 -31 40 -51 91 -186 239 -395 397 -561 40 -41 82 -94 93 -117 27 -52 73 -87 159 -122 53 -22 77 -39 117 -85 l50 -56 -25 -68 c-22 -60 -24 -83 -24 -222 1 -161 14 -260 56 -418 l22 -81 51 127 c28 70 55 133 59 139 11 18 63 -9 72 -37 8 -25 21 -26 28 0 3 11 22 26 46 36 26 10 48 29 63 53 12 20 23 38 24 40 2 2 27 -17 55 -42 59 -52 156 -107 188 -107 27 0 27 -12 0 -36 -56 -51 -84 -182 -60 -279 12 -46 11 -47 -22 -84 -64 -71 -69 -179 -13 -256 19 -26 21 -43 21 -130 l0 -100 -32 3 c-33 2 -33 2 -33 -42 0 -25 -4 -47 -9 -50 -5 -3 -12 -26 -15 -50 -10 -64 -58 -155 -111 -208 -50 -51 -98 -68 -189 -68 -30 0 -57 -4 -60 -9 -3 -5 -2 -38 4 -73 30 -204 33 -261 17 -343 -40 -194 -166 -357 -347 -448 -113 -56 -107 -62 60 -61 108 0 122 3 240 43 69 23 150 56 180 73 77 43 212 150 253 201 82 100 92 143 60 261 -10 38 -17 103 -17 171 -1 96 2 116 22 157 15 30 37 55 60 69 20 12 75 47 121 77 l83 55 46 -12 c26 -7 48 -14 50 -15 1 -2 7 -55 12 -117 5 -63 17 -150 26 -194 9 -44 22 -113 29 -153 21 -109 64 -265 78 -279 9 -10 12 49 12 271 0 223 3 282 13 279 6 -3 12 -9 12 -14 0 -5 5 -9 10 -9 6 0 10 48 10 124 l0 123 42 52 42 51 135 0 136 1 -51 47 c-28 26 -77 70 -109 98 l-57 52 4 122 3 123 -50 17 c-115 40 -117 41 -111 64 3 11 6 34 6 49 0 34 28 48 43 22 43 -77 240 -234 437 -346 87 -49 350 -189 356 -189 2 0 47 -18 99 -41 116 -49 349 -124 465 -149 98 -21 210 -35 210 -26 0 4 -16 21 -36 39 -20 17 -61 62 -90 99 -53 66 -351 349 -399 378 -46 27 -29 35 64 30 l89 -5 -96 91 c-280 263 -491 404 -657 439 -94 20 -225 19 -298 -2 -57 -16 -60 -16 -73 2 -17 23 -12 31 28 38 75 12 150 50 214 107 45 39 105 77 187 118 230 114 338 144 617 173 63 6 125 17 136 25 44 27 114 191 114 266 0 32 -30 235 -56 378 -23 126 -70 272 -102 316 -46 62 -306 327 -393 400 -43 36 -79 72 -79 79 0 8 -7 11 -19 8 -10 -3 -22 0 -25 6 -4 6 -15 11 -24 11 -12 0 -13 -3 -4 -12 19 -19 14 -44 -13 -62 -18 -12 -48 -16 -111 -16 l-86 0 7 58 7 57 -35 -33 c-19 -19 -43 -49 -53 -68 -13 -23 -33 -40 -68 -55 -58 -25 -64 -31 -106 -116 -50 -101 -60 -147 -60 -283 0 -149 -17 -230 -66 -320 -30 -53 -35 -71 -30 -102 6 -34 3 -39 -29 -64 l-35 -26 -45 21 c-74 35 -167 25 -240 -24 l-37 -25 -51 46 c-66 59 -135 99 -216 124 -88 28 -132 26 -171 -6 -42 -36 -96 -147 -110 -227 l-12 -65 -34 14 c-18 8 -54 14 -79 14 -53 0 -88 16 -129 58 l-28 30 21 23 c29 31 26 70 -8 132 -42 75 -59 147 -82 335 -27 230 -75 485 -101 540 -17 34 -56 56 -153 84 -44 12 -86 30 -93 38 -7 8 -29 46 -48 84 -41 78 -54 76 -54 -11 l0 -52 -107 6 c-117 7 -102 1 -253 102 -54 37 -54 37 -46 -8z m2804 -733 c-6 -113 -26 -240 -64 -408 -30 -135 -113 -258 -221 -327 -55 -35 -185 -77 -269 -86 l-51 -6 -6 67 c-3 37 -12 85 -20 108 -15 40 -14 41 19 87 27 36 40 47 62 47 45 0 100 47 158 133 29 45 101 134 159 197 69 75 127 151 167 217 33 56 64 101 67 99 4 -3 3 -60 -1 -128z m-724 -1027 c19 -65 17 -74 -31 -138 -29 -40 -39 -41 -47 -8 -9 34 -48 48 -118 42 -32 -3 -58 -4 -58 -4 0 1 6 22 14 47 12 42 16 45 52 51 46 6 104 35 104 50 0 6 9 9 20 6 11 -3 20 -1 20 4 0 5 6 9 13 9 7 0 21 -26 31 -59z m-473 -1218 c11 -30 0 -94 -17 -100 -15 -5 -38 71 -30 101 8 34 34 33 47 -1z`
                            }, {
                                'definition': `M3393 4240 c-34 -10 -86 -31 -115 -46 -72 -38 -176 -145 -222 -227 -21 -38 -44 -71 -52 -74 -8 -3 -44 4 -78 15 -74 24 -240 63 -373 87 -73 13 -132 16 -285 12 -232 -6 -306 -16 -469 -64 -157 -47 -180 -47 -244 -1 -73 52 -105 66 -197 88 -114 26 -227 33 -331 21 -153 -18 -177 -35 -164 -119 5 -29 19 -49 64 -90 70 -64 118 -92 203 -122 36 -13 74 -31 84 -41 19 -17 17 -20 -59 -96 -46 -46 -111 -129 -160 -203 -140 -211 -201 -351 -246 -560 -52 -243 -37 -499 48 -785 42 -142 80 -249 118 -330 37 -82 46 -125 26 -125 -5 0 -28 7 -52 15 -79 28 -133 37 -230 36 -81 -1 -111 -6 -185 -32 -133 -47 -186 -111 -155 -187 11 -26 8 -34 -32 -94 -44 -65 -57 -107 -57 -184 0 -75 46 -91 162 -54 34 11 92 23 128 25 36 3 86 7 113 10 38 3 47 1 47 -12 0 -9 -7 -24 -16 -34 -25 -28 -43 -89 -44 -151 0 -46 5 -62 24 -85 28 -32 19 -34 216 36 63 22 151 46 195 52 84 12 262 6 363 -12 66 -12 165 -40 172 -50 14 -18 133 -110 183 -142 69 -44 215 -119 289 -147 126 -49 235 -70 361 -70 152 0 253 20 387 77 216 92 344 186 499 368 41 48 126 176 148 223 25 53 140 103 352 153 69 16 135 32 146 34 26 7 281 32 408 41 84 5 103 10 128 31 36 31 37 57 3 109 -52 81 -162 134 -319 154 -88 12 -125 23 -125 38 0 10 102 45 225 77 187 49 205 56 215 75 14 27 12 67 -6 105 -30 64 -187 115 -350 115 -55 0 -84 4 -84 11 0 6 14 27 30 46 34 39 35 44 15 83 -12 23 -28 33 -70 45 -30 9 -61 23 -69 30 -10 11 -15 65 -19 227 -5 216 -25 366 -63 481 -11 33 -13 52 -6 59 10 10 59 4 207 -23 217 -41 255 -37 255 27 0 31 -9 45 -62 98 -82 80 -227 176 -413 271 -152 78 -196 98 -319 141 -70 24 -166 79 -166 95 0 5 25 35 56 66 104 108 175 240 189 355 10 81 2 104 -45 128 -48 24 -95 24 -177 0z`
                            }]
                        }
                    },
                    'subtitle': {
                        'text': "Click the bars to drill down to each Pokemon's individual encounters and their corresponding tweets.<br>Use the mouse wheel (or pinch if on mobile) to zoom into the chart, and click + drag to pan.<br><i>Only includes tweets that contain the hashtag #safariweek or #safariweek2023. Sorted alphabetically.</i>"
                    },
                    'legend': {
                        'verticalAlign': 'top'
                    },
                    'xAxis': {
                        'categories': ['Dragonair', 'Kangaskhan', 'Tangela', 'Lapras', 'Manectric', 'Voltorb', 'Nidorino', 'Chansey', 'Gastly', 'Teddiursa'],
                        'linewidth': 0,
                        'opposite': true
                    },
                    'yAxis': {
                        'visible': false,
                        'stackShadow': {
                            'enabled': true
                        }
                    },
                    'series': [
                        {
                            'name': 'Encounters',
                            'keys': ['name', 'y', 'id', 'color'],
                            'data': [
                                ['Dragonair', 132931, 'https://twitter.com/twitter/status/1667492253873455107', 'rgb(208,62,203)'],
                                ['Kangaskhan', 56690, 'https://twitter.com/twitter/status/1667287777594036224', 'rgb(216,212,177)'],
                                ['Tangela', 52116, 'https://twitter.com/twitter/status/1667916469445722113', 'rgb(54,220,0)'],
                                ['Lapras', 48122, 'https://twitter.com/twitter/status/1667940768969900038', 'rgb(116,73,215)'],
                                ['Manectric', 42186, 'https://twitter.com/twitter/status/1668247118941769729', 'rgb(79,73,97)'],
                                ['Voltorb', 41076, 'https://twitter.com/twitter/status/1666463331790782464', 'rgb(4,18,190)']
                            ]
                        }
                    ]
                })
            }

            function ajaxCalls() {
                return [
                    $.ajax({
                        url: monCountsLink,
                        dataType: 'json'
                    }),
                    $.ajax({
                        url: monEncountersLink,
                        dataType: 'json'
                    }),
                    $.ajax({
                        url: manectricSVGLink,
                        dataType: 'txt'
                    })
                ];
            }

            $.when.apply($, ajaxCalls()).then(createHighchart);
        </script>
    </body>
</html>