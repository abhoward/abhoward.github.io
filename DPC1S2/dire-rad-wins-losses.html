<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
        <script type="text/javascript" src="https://code.highcharts.com/highcharts.js"></script>
        <script type="text/javascript" src="https://code.highcharts.com/highcharts-more.js"></script>
        <script type="text/javascript" src="https://code.highcharts.com/modules/exporting.js"></script>
        <script type="text/javascript" src="https://code.highcharts.com/modules/drilldown.js"></script>
    </head>
        <body style="margin:0;padding:0">
        <div id="container" style="">Loading....</div>
        <script>
            var fpsLink = 'https://raw.githubusercontent.com/abhoward/abhoward.github.io/main/data/DPC1S2/animajor/fps_dict.json';

            function createHighchart(data1) {
                var fps = data1;

                Highcharts.chart('container', {
                    'chart': {
                        'type': 'pie'
                    },
                    'title': {
                        'text': 'Radiant vs Dire: Wins'
                    },
                    'subtitle': {
                        'text': 'Click the slices to view wins vs losses. Source: opendota.com.<br><i>Excludes matches <code>6025172903</code>, <code>6023211594</code> and <code>6023110186</code> due to lack of data.</i>'
                    },
                    'plotOptions': {
                        'series': {
                            'dataLabels': {
                                'enabled': true,
                                'format': '{point.name}: {point.y:.1f}%'
                            }
                        },
                        'pie': {
                            'allowPointSelect': true,
                            'cursor': 'pointer',
                            'colors': ['rgba(184, 60, 51, 0.75)', 'rgba(56, 171, 48, 0.75)'],
                            'dataLabels': {
                                'enabled': true,
                                'format': '{point.percentage:.1f}%',
                                'distance': -50,
                                'color': 'black'
                            }
                        }
                    },
                    'tooltip': {
                        'pointFormat': '<span style="color:{point.color}">{point.name}</span>: <b>{point.y}</b><br/>',
                        'headerFormat': '<b>{series.name}</b><br>'
                    },
                    'series': [
                        {
                            'name': 'Side',
                            'id': 'Side',
                            'data': [
                                {
                                    'name': 'Radiant',
                                    'y': fps['rad_wins'],
                                    'drilldown': 'Wins With Radiant'
                                },
                                {
                                    'name': 'Dire',
                                    'y': fps['dire_wins'],
                                    'drilldown': 'Wins With Dire'
                                }
                            ]
                        },
                    ],
                    'drilldown': {
                        'drillUpButton': {
                            'theme': {
                                'fill': 'white',
                                'stroke-width': 1,
                                'stroke': 'silver',
                                'r': 0
                            }
                        },
                        'series': [
                            {
                                'name': 'Radiant Wins',
                                'id': 'Radiant Wins',
                                'data': [
                                    {
                                        'name': 'Wins With First Pick',
                                        'y': fps['rad_fps_rad_wins']
                                    },
                                    {
                                        'name': 'Wins With Second Pick',
                                        'y': fps['dire_fps_rad_wins']
                                    }
                                ]
                            },
                            {
                                'name': 'Dire Wins',
                                'id': 'Dire Wins',
                                'data': [
                                    {
                                        'name': 'Wins With First Pick',
                                        'y': fps['dire_fps_dire_wins']
                                    },
                                    {
                                        'name': 'Wins With Second Pick',
                                        'y': fps['rad_fps_dire_wins']
                                    }
                                ]
                            }
                        ]
                    }
                });
            }

            function ajaxCalls() {
                return [
                    $.ajax({
                        url: fpsLink,
                        dataType: 'json'
                    })
                ];
            }

            $.when.apply($, ajaxCalls()).then(createHighchart);
        </script>

    </body>
</html>